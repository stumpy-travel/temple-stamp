
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>å»¶å£½å¯º GPS é©—è­‰é›†ç« </title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 2em; }
        .status { margin-top: 1em; font-size: 1.2em; color: #333; }
        .button { margin-top: 2em; }
    </style>
</head>
<body>
    <h2>ğŸ“ å»¶å£½å¯º é›†ç« é©—è­‰</h2>
    <p>è«‹å…è¨±å®šä½ï¼Œä»¥ç¢ºèªä½ æ˜¯å¦åœ¨å¯ºå»Ÿé™„è¿‘ï¼ˆ20 å…¬å°ºå…§ï¼‰</p>
    <div class="status" id="status">æ­£åœ¨å®šä½ä¸­...</div>
    <div class="button" id="form-link" style="display:none;">
        âœ… é©—è­‰æˆåŠŸï¼<br><br>
        <a href="https://docs.google.com/forms/d/e/1FAIpQLSe8IkaMwYe3hbW_5YY9ge6CDe_CS9vMfAw8KBkn_SolRZbkLA/viewform?usp=sharing" target="_blank">
            <button style="font-size:1em;padding:10px 20px;">å‰å¾€å¡«å¯«é›†ç« è¡¨å–®</button>
        </a>
    </div>
    <script>
        const targetLat = 25.0428;
        const targetLng = 121.50632;
        const maxDistance = 20; // å…¬å°º

        function getDistance(lat1, lon1, lat2, lon2) {
            const R = 6371e3; // åœ°çƒåŠå¾‘ï¼ˆå…¬å°ºï¼‰
            const toRad = x => x * Math.PI / 180;
            const Ï†1 = toRad(lat1), Ï†2 = toRad(lat2);
            const Î”Ï† = toRad(lat2 - lat1);
            const Î”Î» = toRad(lon2 - lon1);
            const a = Math.sin(Î”Ï†/2)**2 + Math.cos(Ï†1)*Math.cos(Ï†2)*Math.sin(Î”Î»/2)**2;
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return R * c;
        }

        navigator.geolocation.getCurrentPosition(position => {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            const distance = getDistance(lat, lng, targetLat, targetLng);
            if (distance <= maxDistance) {
                document.getElementById("status").innerText = "âœ… é©—è­‰æˆåŠŸï¼ä½ èˆ‡å¯ºå»Ÿè·é›¢ç´„ " + Math.round(distance) + " å…¬å°º";
                document.getElementById("form-link").style.display = 'block';
            } else {
                document.getElementById("status").innerText = "âŒ é©—è­‰å¤±æ•—ï¼šä½ èˆ‡å¯ºå»Ÿè·é›¢ç´„ " + Math.round(distance) + " å…¬å°ºï¼Œå°šæœªåˆ°é”ç›®æ¨™ä½ç½®ã€‚";
            }
        }, error => {
            document.getElementById("status").innerText = "âš ï¸ ç„¡æ³•å–å¾— GPS ä½ç½®ï¼Œè«‹ç¢ºèªå·²å…è¨±å®šä½æ¬Šé™ã€‚";
        });
    </script>
</body>
</html>
